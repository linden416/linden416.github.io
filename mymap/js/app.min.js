function getGoogleMap_n_Markers(){function e(e,a){if(a==google.maps.places.PlacesServiceStatus.OK){var t=new google.maps.Marker({map:map,position:e.geometry.location}),i=e.name;e.name.indexOf("CNN")>-1?i="CNN Center":e.name.indexOf("Fox")>-1?i="Fox Theatre":e.name.indexOf("Georgia Institute of Technology")>-1&&(i="Georgia Tech"),markersHash[i]=t,google.maps.event.addListener(t,"click",function(){infowindow.setContent(buildInfoWindowContent(i)),infowindow.open(map,t)}),google.maps.event.addListener(t,"mouseover",function(){infowindow.setContent(i),infowindow.open(map,t)})}else console.log("Failed to access Google Place Marker!"),$("#statusLine").append("<span>Failed to access a Google Map Place Marker;&nbsp;&nbsp;</span>")}console.log("getGoogleMap_n_Markers");var a=Atlanta.zoom,t=$("#DummyDivId").css("max-width");"320px"===t&&(a=13),map=new google.maps.Map(document.getElementById("map-canvas"),{center:new google.maps.LatLng(Atlanta.latitude,Atlanta.longitude),zoom:a}),infowindow=new google.maps.InfoWindow,google.maps.event.addListener(infowindow,"closeclick",function(){map.setCenter(new google.maps.LatLng(Atlanta.latitude,Atlanta.longitude)),map.setZoom(a)});for(var i=new google.maps.places.PlacesService(map),o=0;o<predefinedlocations.length;o++){var n="<div id='locationId'><h3>"+predefinedlocations[o].place+"</h3>";n+="<p id='address'>"+predefinedlocations[o].address+"</p></div>",locationHash[predefinedlocations[o].place]=n;var s={placeId:predefinedlocations[o].PlaceId};i.getDetails(s,e)}}function getFlickrPhotos(){console.log("getFlickrPhotos");{var e="https://api.flickr.com/services/rest/?method=flickr.galleries.getPhotos",a={api_key:"77b04d2ba00b81ecf907fb0c3c7498b0",gallery_id:"131654409-72157649533974933",format:"json",nojsoncallback:"1"};$.getJSON(e,a).done(function(e){if("ok"===e.stat)for(var a=0;a<e.photos.total;a++){var t=e.photos.photo[a].farm,i=e.photos.photo[a].server,o=e.photos.photo[a].id,n=e.photos.photo[a].secret,s=e.photos.photo[a].title,l="https://farm"+t+".staticflickr.com/"+i+"/"+o+"_"+n+".jpg";s=s.toLowerCase();for(var r=0;r<predefinedlocations.length;r++){var c=predefinedlocations[r].place;if(c=c.toLowerCase(),s.indexOf(c)>-1){var d="<div id='flickrDiv'><hr><p id='flickrTagname'>Flickr</p>";d+="<img id='flickrImg' src='"+l+"' alt='Flickr Image'></img>",d+="</div>",flickrHash[predefinedlocations[r].place]=d,r=predefinedlocations.length}}}}).fail(function(){console.log("Failed to access flickr.galleries.getPhotos!"),$("#statusLine").append("<span>Page failed to access Flickr Services;&nbsp;&nbsp;</span>")})}}function getWikiInformation(){console.log("getWikiInformation");for(var e=setTimeout(function(){console.log("Failed to access Wikipedia"),$("#statusLine").append("<span>Page timed out accessing Wikipedia Services;&nbsp;&nbsp;</span>")},8e3),a=0;a<predefinedlocations.length;a++){var t=predefinedlocations[a].place;"Fox Theatre"===t&&(t=predefinedlocations[a].place+" (Atlanta)"),$.ajax({url:"http://en.wikipedia.org/w/api.php",data:{action:"opensearch",format:"json",redirects:"resolve",search:t},dataType:"jsonp",jsoncallback:""}).done(function(a){var t=a[0],i=a[1][0],o=a[3][0],n=a[2][0],s="<div id='wikiId'><hr><p id='wikiTagname'>Wikipedia</p>";s+="<a id='wikiLink' href='"+o+"'>"+i+"</a><p id='wikiSummary'>"+n+"</p></div>",t.indexOf("(Atlanta)")>1&&(t=t.substring(0,t.indexOf(" (Atlanta)"))),wikiHash[t]=s,clearTimeout(e)}).fail(function(){console.log("An exception occurred accessing Wikipedia"),$("#statusLine").append("<span>Page failed to access Wikipedia Services;&nbsp;&nbsp;</span>")}).always(function(){})}}function buildInfoWindowContent(e){console.log("buildInfoWindowContent");var a="<div id='contentInfo'>";return a+=locationHash[e],a+=void 0===flickrHash[e]?"<div id='flickrDiv'><hr><p id='flickrTagname'>Flickr</p><p>Photo not found</p></div>":flickrHash[e],a+=void 0===wikiHash[e]?"<div id='wikiLink'><hr><p id='wikiTagname'>Wikipedia</p><p>Location not found</p></div>":wikiHash[e],a+="</div>"}var predefinedlocations=[{place:"Atlantic Station",PlaceId:"ChIJVbS_XvcE9YgRBnYS_RrLgHg",address:"Atlantic Station, Atlanta, GA, USA",visibleStatus:!0},{place:"CNN Center",PlaceId:"ChIJd_c_Y4AD9YgRHw-SJKG4z4k",address:"190 Marietta Street Northwest, Atlanta, GA 30303, United States",visibleStatus:!0},{place:"Fox Theatre",PlaceId:"ChIJ28DQdm8E9YgRnsZ4YZ94nRo",address:"660 Peachtree Street Northeast, Atlanta, GA 30308, United States",visibleStatus:!0},{place:"Georgia Aquarium",PlaceId:"ChIJGQT0RX4E9YgR3EqvqXZw1_4",address:"225 Baker Street Northwest, Atlanta, GA 30313, United States",visibleStatus:!0},{place:"Georgia Tech",PlaceId:"ChIJ40_D64oE9YgRD8XYOj7QKrU",address:"North Ave NW, Atlanta, GA 30332, United States",visibleStatus:!0},{place:"Georgia World Congress Center",PlaceId:"ChIJiadaA4AD9YgRd4ebM1r2cgA",address:"285 Andrew Young International Blvd NW, Atlanta, GA 30303",visibleStatus:!0},{place:"High Museum of Art",PlaceId:"ChIJf8bUMEUE9YgR8nttKmmxaPc",address:"1280 Peachtree Street Northeast, Atlanta, GA 30309, United States",visibleStatus:!0},{place:"Piedmont Park",PlaceId:"ChIJlxti7TgE9YgRSjhV1kb_mbY",address:"1342 Worchester Drive Northeast, Atlanta, GA 30306, United States",visibleStatus:!0},{place:"Woodruff Arts Center",PlaceId:"ChIJf8bUMEUE9YgRI5s3hH594AY",address:"1280 Peachtree Street Northeast, Atlanta, GA 30309, United States",visibleStatus:!0},{place:"World of Coca-Cola",PlaceId:"ChIJ8yjI7H4E9YgRyacfAZqyAUQ",address:"121 Baker St NW, Atlanta, GA 30313",visibleStatus:!0}],Atlanta={latitude:33.780423,longitude:-84.3908896,zoom:14},markersHash={},wikiHash={},flickrHash={},locationHash={},map={},infowindow={},ViewModel=function(){var e=this;e.searchPattern=ko.observable(),e.keyLocationsList=ko.observableArray([]),predefinedlocations.forEach(function(a){e.keyLocationsList.push(new Location(a))}),e.displayLocationInfoWindow=function(e){infowindow.setContent(buildInfoWindowContent(e.place())),infowindow.open(map,markersHash[e.place()])},e.displayLocationTitle=function(e){infowindow.setContent(e.place()),infowindow.open(map,markersHash[e.place()])},e.searchLocations=function(){if(void 0!==e.searchPattern())for(var a=0,t=e.keyLocationsList().length;t>a;a++){var i=e.keyLocationsList()[a];if(0===e.searchPattern().length)i.visibleStatus(!0),markersHash[i.place()].setVisible(!0);else{var o=e.searchPattern().toLowerCase(),n=i.place().toLowerCase();0===n.indexOf(o)?(i.visibleStatus(!0),markersHash[i.place()].setVisible(!0)):(i.visibleStatus(!1),markersHash[i.place()].setVisible(!1))}}};try{getGoogleMap_n_Markers(),getFlickrPhotos(),getWikiInformation()}catch(a){console.log("Exception processing APIs! "+a),$("#statusLine").append("<span>Page exception occurred accessing APIs!&nbsp;&nbsp;</span>")}$("#searchId").focus()},Location=function(e){this.place=ko.observable(e.place),this.visibleStatus=ko.observable(e.visibleStatus)};ko.applyBindings(new ViewModel),$(window).resize(function(){var e=$(window).height(),a=10;$("#map-canvas").css("height",e-a)}).resize();